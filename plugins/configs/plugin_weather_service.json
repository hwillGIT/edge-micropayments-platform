{
  "role": "both",
  "device_id": "weather-service-001",
  "port": 9085,
  "debugpy_port": 3343,
  "provider_endpoint": "http://localhost:9085/receive-ect",
  
  "access_control_url": "http://edgemicropayments.ddns.net:8081",
  "registry_url": "http://edgemicropayments.ddns.net:8082",
  "escrow_url": "http://edgemicropayments.ddns.net:8083",
  "pricing_url": "http://edgemicropayments.ddns.net:8080",
  "dht_url": "http://edgemicropayments.ddns.net:5001",
  "rpc_url": "http://edgemicropayments.ddns.net:8545",

  "wallets": [
    {
      "name": "Weather Service Wallet",
      "address": "0x8F3a2D1C6B9E5A4c7F2D8E1B3C6A9F5D4E7B2A8C1",
      "purpose": "general"
    }
  ],
  "notifications": { "emails": ["hubertwilliams@hotmail.com"] },
  "ledger": { "storage": "sqlite", "path": "ledger.db" },

  "generators": [
    {
      "class": "plugins.plugin_weather_service.PluginWeatherService",
      "service_id": "weather data",
      "description": "IoT device streaming current weather data",
      "funding_mode": "auto_fill",
  "initial_balance": 10000.0,
      "tags": ["custom","iot","weather"],
      "pricing": {
        "pull": {
          "price_usdc": 0.01,
          "billing_model": "per_pull_event"
        },
        "pubsub": {
          "price_usdc": 0.40,
          "billing_model": "per_escrow_event"
        }
      },
      "delivery_modes": ["pull","pubsub"],
      "pubsub": {
        "schema_version": 1,
        "broker_url": "mqtt://edgemicropayments.ddns.net:1883",
        "topic_pattern": "empic/{provider_id}/{service_id}/{escrow_id}",
        "qos": 1,
        "retain": true,
        "auth": { "type": "none" },

        "pubsub_terms": {
          "duration_sec": 60,
          "expected_msgs": 15,
          "min_valid_ratio": 0.75,
          "min_msg_count": 10,
          "auto_renew": false
        }
      }
    }
  ],

  "consumers": []
}